---
# use the default theme
theme: default
# apply any windi css classes to the current slide
class: 'text-center'
# define the highlighter and the colorSchema
highlighter: prism
colorSchema: light
remoteAssets: false
# show line numbers in code blocks
lineNumbers: false
# define the fonts
fonts:
  # define the font for the body text
  sans: 'IBM Plex Sans'
  # define the serif font
  serif: 'IBM Plex Serif'
  # define the code font
  mono: 'IBM Plex Mono'
  # load several font weights
  weights: '200,400,500'
  # support the use of italics
  italic: true
---

[//]: # (Slide Start {{{)

# Discrete Structures

## Data Streams

<div class="container my-5">
  &nbsp;
</div>

### Gregory M. Kapfhammer

### www.proactiveprogrammers.com

[//]: # (Slide End }}})

---

[//]: # (Slide Start {{{)

# <em>Okay</em>, what is this about?

<style>
  h2 {
    font-size: 36px;
    @apply text-orange-600 mb-2;
  }
</style>

<br>

<div v-click>

## Key Question

> How do I use **dynamically generated streams** of data to implement **memory
> efficient** and **predictable** Python programs?

</div>

<br>

<div v-click>

## Learning Objectives

> To **remember** and **understand** some the concept of a **streams**,
> exploring the differences between static sequences and dynamically generated
> streams and learning about their practical applications

</div>

<div class="flex row mt-3">

<uim-rocket class="text-6xl ml-9 mt-0 text-blue-600" />

<div class="text-4xl text-true-gray-700 font-bold mt-4 ml-4">
Let's study static and dynamic sequences!
</div>

</div>

[//]: # (Slide End }}})

---

# Dynamically Generated Streams

<v-clicks>

-   **Sequences** and **streams** are evident in Python programs!

-   **Static**: does not change and **dynamic**: does change

-   **Static** sequences and **dynamically** **generated** **streams**:

    -   A list is a static sequence that exists as a complete data
        structure

    -   An file input stream appears dynamically over time when read

    -   Let's distinguish between static sequences and dynamic streams

    -   Example: streams are generated by iterators and range objects

-   What are the **benefits** of having a dynamic stream whose values are not
known until they are generated and returned? How does a discrete structure
influence the **memory consumption** of a Python program?

</v-clicks>

---

[//]: # (Slide Start {{{)

<div class="flex row">

<div class="text-7xl text-orange-600 font-bold mt-5 ml-4 mb-4">
Static and dynamic sequences in Python
</div>

</div>

<div v-click>

<div class="flex row">

<mdi-abacus class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Static sequence exists as a complete structure
</div>

</div>

</div>

<div v-click>

<div class="flex row">

<mdi-abacus class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Dynamic sequence is generated incrementally
</div>

</div>

</div>

<div v-click>

<div class="flex row">

<mdi-abacus class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Dynamically generated sequences are streams
</div>

</div>

</div>

[//]: # (Slide End }}})

---

# File Input Involves the Use of Streams

```python
file = open("emails")
for line in file:
  name, email = line.split(",")
  if name == "John Davis":
    print(email)
```

<v-click>

- The **file** is a **sequence** of characters

- A **character** is a sequence of **numbers**

- Does the entire **file exist** in the computer's memory?

- What would happen if the file was **many gigabytes** in size?

- Are there **alternatives** for static sequences? What are they?

</v-click>

---

# Using Comprehensions and Generators

```python
list_comprehension =
  ['Hello' for i in range(3)]

generator_expression =
  ('Hello' for i in range(3))

print(list_comprehension)
print(generator_expression)
```

<v-click>

- How are these two constructs **similar** and **different**?

- What is the **output** of this Python program segment?

- How is this **different** than a **static sequence** like a file?

</v-click>

---

# Program Segment Output

```
Output from the list comprehension:

  ['Hello', 'Hello', 'Hello']

Output from the generator expression:

  <generator object <genexpr>
    at 0x7f0ebc7bc890>
```

<div class="mt-10">

<v-click>

- Okay, the first output makes sense! It iteratively created a list! âœ¨

- What is the meaning of `genexpr` and `0x7f0ebc7bc890` ?

</v-click>

</div>

---

# Using a Generator Expression in Python

```python
even_squares =
  (x * x for x in range(10)
             if x % 2 == 0)

print(even_squares)

for value in even_squares:
    print(value)
```

<v-click>

- How would you write this program with a list and loop(s)?

- What is the difference between the output statements?

</v-click>

---

# Output from a Generator Expression

```python
<generator object <genexpr>
  at 0x7f8cb00db430>

  0
  4
  16
  36
  64
```

<v-click>

- What is the meaning of `genexpr` and `0x7f8cb00db430` ?

- What does this tell us about generator expressions?

- What are the overall benefits of generators?

</v-click>

---

# Exhausting a Generator Expression

```python
even_squares =
  (x * x for x in range(10)
             if x % 2 == 0)

for value in even_squares:
    print(value)

for value in even_squares:
    print(value)
```

<v-click>

- The first `for` loop correctly iterates through the generator!

- What happens when the second `for` loop runs? No output! Why?

</v-click>

---

# Using Generator Functions in Python

```python {all|1|2-3|4-6|8|10-11|all}
def fibonacci_generator(n):
    a = 1
    b = 1
    for i in range(n):
        yield a
        a, b = b, a + b

print(fibonacci_generator)

for value in fibonacci_generator(10):
    print(value, end=" ")
```

---

# Output from a Generator Function

```python
print(fibonacci_generator)

    <function fibonacci_generator
      at 0x7f791d4bb1f0>

for value in fibonacci_generator(10):
    print(fibonacci_value, end=" ")

    1 1 2 3 5 8 13 21 34 55
```

<v-click>

- **Generator functions** versus **generator expressions**?

- Can you find the **pattern** in these numbers?

</v-click>

---

[//]: # (Slide Start {{{)

<div class="flex row">

<div class="text-7xl text-orange-600 font-bold mt-5 ml-4 mb-4">
Let's explore generators for data streams!
</div>

</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Visit the <a href = "https://proactiveprogrammers.com/live">Proactive Programmers Live</a> site!
</div>

</div>

</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-1">
Go to the <code>data-streams/</code> directory
</div>

</div>

</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Use <code>explore-generator-techniques.ipynb</code>
</div>

</div>

</div>

[//]: # (Slide End }}})

---

# Using Functions and Tuples in Python

<div class="-ml-2">

```python {all|1|2-4|5-8|10-12|all}
def fibonacci_tuple(n):
    result = ( )
    a = 1
    b = 1
    for i in range(n):
        result += (a,)
        a, b = b, a + b
    return result

print(fibonacci_tuple)
for fibonacci_value in fibonacci_tuple(10):
  print(fibonacci_value, end=" ")
```

</div>

---

# Output from a Tuple Function in Python

```python
print(fibonacci_tuple)

  <function fibonacci_tuple
    at 0x7f6e976b61f0>

for fibonacci_value in fibonacci_tuple(10):
  print(fibonacci_value, end=" ")

  1 1 2 3 5 8 13 21 34 55
```

<v-click>

- Generator functions versus tuple functions?

- Drawbacks of tuple-creation functions?

</v-click>

---

# Using Functions and List in Python

<div class="-ml-2">

```python {all|1|2-4|5-8|10-12|all}
def fibonacci_list(n):
    result = []
    a = 1
    b = 1
    for i in range(n):
        result.append(a)
        a, b = b, a + b
    return result

print(fibonacci_list)
for fibonacci_value in fibonacci_list(10):
  print(fibonacci_value, end=" ")

```

</div>

---

# Output from a List Function in Python

```python
print(fibonacci_list)

  <function fibonacci_list at 0x7fd1abf2c040>


for fibonacci_value in fibonacci_list(10):
  print(fibonacci_value, end=" ")

  1 1 2 3 5 8 13 21 34 55
```

<v-click>

- Tuple functions versus list functions?

- Drawbacks of list-creation functions?

</v-click>

---

# Using Generators, Tuples, and Lists

<v-clicks>

-   Remember, each function produces the **same final output**!

-   **Behavior** and **memory** use differs for each function type

-   Understanding the properties of these approaches:

    -   **Generator**: caller **pulls** values from the function

    -   **Tuple**: function **pushes** values to the caller

    -   **List**: function also **pushes** values to the caller

-   If a computer's memory was constrained, what would be the **best**
    approach?

-   If a computer's memory was constrained, what would be the **worst**
    approach?

-   What are the **overall trade-offs** of using these approaches?

</v-clicks>

---

[//]: # (Slide Start {{{)

<div class="flex row">

<div class="text-7xl text-orange-600 font-bold mt-5 ml-4 mb-4">
Comprehensions and generators in Python
</div>

</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Dynamically generate a sequence of values
</div>

</div>

</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Functions leverage the <code>yield</code> construct
</div>

</div>

</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Different approaches can produce same sequence
</div>

</div>

</div>

[//]: # (Slide End }}})

---

# Endless Streams in Python Programs

```python {all}
def integers(n: int) -> int:
    while True:
        yield n
        n += 1

for value in integers(10):
    print(value)
```

<div class="mt-8">

- What is the purpose of this function?

- What is the output of this program?

- Does this function ever stop running?

</div>

---

# Output of an Endless Stream Program

```python
441027
441028
441029
441030
^C441031
Traceback (most recent call last):
  File "endless-stream.py", line 7,
  in <module> print(value)
KeyboardInterrupt
```

<div class="mt-10">

## You can use <code>ctrl-c</code> to stop a program that runs infinitely!

</div>

---

[//]: # (Slide Start {{{)

<div class="flex row">

<div class="text-7xl text-orange-600 font-bold mt-5 ml-4 mb-4">
Let's explore endless data streams in Python!
</div>

</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Visit the <a href = "https://proactiveprogrammers.com/live">Proactive Programmers Live</a> site!
</div>

</div>

</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-1">
Go to the <code>data-streams/</code> directory
</div>

</div>

</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Use <code>explore-generator-techniques.ipynb</code>
</div>

</div>

</div>

[//]: # (Slide End }}})

---

# Applications of Data Streams?

<v-clicks>

-   Programs frequently need to **transfer** data to other programs

-   Many applications don't want the **entire data file** to be available

-   Programs prefer to **multicast** stream to multiple clients

-   Data that is commonly **streamed** to other programs:

    -   **Music files** stream from a server to a mobile device

    -   **Video files** stream from a server to a mobile device

    -   **Data sets** stream from server to multiple clients

-  Streaming requires a **constant connection** to the server

-  Streaming often requires a more **complex** implementation

</v-clicks>

---

[//]: # (Slide Start {{{)

<div class="flex row">

<div class="text-7xl text-orange-600 font-bold mt-5 ml-4 mb-4">
What are the trade-offs for dynamic streams?
</div>
</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Lowers the memory footprint at point in time
</div>

</div>

</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Ensures that entire structure not in memory
</div>

</div>

</div>

<div v-click>

<div class="flex row">

<mdi-tooltip-check class="text-6xl ml-8 mt-6 text-blue-600" />

<div class="text-3xl font-bold mt-10 ml-4">
Limits opportunity to traverse again the data
</div>

</div>

</div>

[//]: # (Slide End }}})

---

# Using Streams in Python Programs

<v-clicks>

-   Python programs frequently generate **streams of values**

-   **Static** versus **dynamic** streams in Python programs

-   Using streams enables the program to be **memory efficient**

-   Using tuples, lists, and streams in Python programs:

    -   **Q1**: What is the difference between a list and a tuple?
    -   **Q2**: What is the difference between a list and stream?
    -   **Q3**: What is the difference between a tuple and a stream?
    -   **Q4**: How can you concatenate streams into a new stream?
    -   **Q5**: How do streams aid distributed programming in Python?

-   Dynamically generated streams support memory efficiency and flexibility.
Also, the **stream** is a **monoid** under the identify of the empty stream!

</v-clicks>
